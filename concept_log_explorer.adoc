---
sidebar: sidebar 
permalink: concept_log_explorer.html 
keywords: logs, monitors, alerts, EMS, 
summary: 日誌瀏覽器是一個透過不同的系統日誌調查問題的強大工具。 
---
= 日誌瀏覽器
:hardbreaks:
:allow-uri-read: 


[role="lead"]
Data Infrastructure Insights日誌瀏覽器是查詢系統日誌的強大工具。除了幫助調查之外，您還可以在監視器中保存日誌查詢，以便在啟動特定日誌觸發器時提供警報。

若要開始瀏覽日誌，請按一下*日誌查詢>+新日誌查詢*。

從清單中選擇可用的日誌。

image:LogExplorer_2022.png["選擇您的日誌"]


NOTE: 可供查詢的日誌類型可能會根據您的環境而有所不同。隨著時間的推移，可能會新增其他日誌類型。

您可以設定篩選器來進一步最佳化查詢結果。例如，要尋找所有顯示失敗的日誌訊息，請為包含單字「失敗」的_Messages_設定過濾器。


TIP: 您可以在篩選器欄位中開始輸入所需的文字； Data Infrastructure Insights將提示您建立包含您輸入的字串的通配符搜尋。

結果以圖表形式顯示，顯示每個時間段內的日誌實例數量。圖表下方是日誌條目本身。圖表和條目根據所選的時間範圍自動刷新。

image:LogExplorer_QueryForFailed.png["顯示過濾器的查詢範例"]



== 濾



=== 包括/排除

過濾日誌時，您可以選擇*包含*（即「過濾到」）或*排除*您輸入的字串。排除的字串在完成的過濾器中顯示為“NOT <string>”。

image:Log_Advanced_Query_Filter_Exclude.png["日誌過濾器顯示排除選項"]

基於通配符或表達式的篩選器（例如 NOT、OR、「無」等）在篩選器欄位中以深藍色顯示。您直接從清單中選擇的項目顯示為淺藍色。


NOTE: 在任何時候，您都可以按一下「建立日誌監視器」以根據目前過濾器建立新的監視器。



=== 進階過濾

當您在查詢或儀表板小工具中篩選文字或清單值時，當您開始輸入時，系統會向您顯示基於目前文字建立*通配符篩選器*的選項。選擇此選項將傳回與通配符表達式相符的所有結果。您也可以使用 NOT、AND 或 OR 建立表達式，或選擇「無」選項來過濾空值。


NOTE: 在建立過濾時，請務必儘早並經常儲存查詢。進階查詢是「自由格式」的字串輸入，在建置時可能會出現解析錯誤。

看看此螢幕圖像，其中顯示了對 _logs.kubernetes.event_ 日誌的高級查詢的過濾結果。此頁面上有很多內容，如下圖所示：

image:Log_Advanced_Query_ScreenExplained.png["進階查詢畫面說明"]

. 此進階查詢字串可過濾以下內容：
+
** 過濾包含單字「failed」的_reason_日誌條目，但不過濾任何包含「FailedMount」具體原因的日誌條目。
** 包括任何包含「metadata.namespace」且包含單字「monitoring」的條目，但排除「cm-monitoring」或「eg-monitoring」的特定命名空間。
+
請注意，在上述情況下，由於“cm-monitoring”和“eg-monitoring”都包含破折號（“-”），因此必須將字串包含在雙引號中，否則將顯示解析錯誤。不包含破折號、空格等的字串不需要用引號引起來。如果有疑問，請嘗試將字串放在引號中。



. 目前過濾器的結果（包括任何「過濾依據」值和進階查詢過濾器）都會顯示在結果清單中。此列表可以按照任何顯示的列進行排序。若要顯示其他列，請選擇“齒輪”圖示。
. 此圖表已放大，僅顯示在特定時間範圍內發生的日誌結果。此處顯示的時間範圍反映了目前的縮放等級。選擇「重置縮放」按鈕將縮放等級設定回目前Data Infrastructure Insights時間範圍。
. 圖表結果已按_source_欄位分組。圖表按顏色分組顯示了每個列的結果。將滑鼠懸停在圖表中的某一列上將顯示有關特定條目的一些詳細資訊。
+
image:Log_Advanced_Query_Group_Detail.png["分組懸停詳細信息"]





==== 精煉過濾器

您可以使用以下內容來優化過濾器：

|===


| 篩選 | 它的作用 


| *（星號） | 讓您搜尋一切 


| ？  （問號） | 使您能夠搜尋特定數量的字符 


| 或者 | 使您能夠指定多個實體 


| 不是 | 允許您從搜尋結果中排除文本 


| _沒有任何_ | 在所有欄位中搜尋 NULL 值 


| 不是 * | 在純文字欄位中搜尋 NULL 值 
|===
如果將過濾字串括在雙引號中，Insight 會將第一個引號和最後一個引號之間的所有內容視為完全匹配。引號內的任何特殊字元或運算符將被視為文字。例如，過濾「*」將傳回文字星號的結果；在這種情況下，星號不會被視為通配符。當運算子 OR 和 NOT 括在雙引號中時，它們也將被視為文字字串。

您可以將簡單篩選器與進階查詢篩選器結合；產生的篩選器是兩者的「AND」。



=== 圖表圖例

圖表下方的「圖例」也有一些驚喜。對於圖例中顯示的每個結果（基於目前篩選器），您可以選擇僅顯示該行的結果（新增篩選器），或顯示不屬於該行的任何結果（新增排除篩選器）。圖表和日誌條目清單將更新以顯示基於您的選擇的結果。若要刪除此過濾，請再次開啟圖例並選擇 [X] 以清除基於圖例的過濾器。

image:Log_Advanced_Query_Legend.png["進階查詢圖例顯示第一個結果的“新增篩選器”"]



== 日誌詳細信息

按一下清單中日誌條目的任意位置將開啟該條目的詳細資料窗格。您可以在這裡探索有關該活動的更多資訊。

點擊「新增過濾器」將選定的欄位新增至目前過濾器。日誌條目清單將根據新的過濾器進行更新。

請注意，某些欄位無法新增為過濾器；在這些情況下，「新增過濾器」圖示不可用。

image:LogExplorer_DetailPane.png["日誌條目詳細資料窗格"]



== 故障排除

在這裡您可以找到有關解決日誌查詢問題的建議。

|===


| *問題：* | *試試這個：* 


| 我在日誌查詢中沒有看到“調試”訊息 | 未收集調試日誌訊息。若要擷取您想要的訊息，請將相關訊息的嚴重性變更為_訊息、錯誤、警報、緊急_或_通知_等級。 
|===