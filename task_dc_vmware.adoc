---
sidebar: sidebar 
permalink: task_dc_vmware.html 
keywords: data collector, VMware, 
summary: 配置 VMware 資料收集器。 
---
= 配置 VMware VSphere 資料收集器
:hardbreaks:
:allow-uri-read: 


[role="lead"]
VMware vSphere 的資料收集器收集 VM 用戶機和 ESXi 主機效能和配置訊息，並需要對 vSphere 內的所有物件具有唯讀權限。自 2024 年 8 月起，vSphere 收集器也會引入來自 vSphere 環境的日誌訊息以及一些 VMware 特定指標。請注意，Data Infrastructure Insights只能從 vSphere 8.0.1 或更高版本的環境中檢索 VMware 日誌資訊。同樣，供應商特定指標僅支援 vSphere 7+ 環境。因此，如果指向較舊的 vSphere 實例，您可能需要停用給定收集器上的日誌和/或供應商特定指標複選框。



== 術語

Data Infrastructure Insights從 VMware vSphere 資料收集器取得以下庫存資訊。對於所取得的每種資產類型，都會顯示該資產最常用的術語。當查看或排除此資料收集器的故障時，請記住以下術語：

[cols="2*"]
|===
| 供應商/型號術語 | Data Infrastructure Insights術語 


| 虛擬磁碟 | 磁碟 


| 主持人 | 主持人 


| 虛擬機 | 虛擬機 


| 資料儲存 | 資料儲存 


| 邏輯單元號 | 體積 


| 光纖通道連接埠 | 港口 
|===
這些只是常見的術語映射，可能並不代表該資料收集器的所有情況。



== 要求

配置此數據收集器需要以下資訊：

* 虛擬中心伺服器的 IP 位址
* 虛擬中心中的唯讀使用者名稱和密碼
* 我們要求對虛擬中心內的所有物件擁有唯讀權限。
* 虛擬中心伺服器上的 SDK 存取 – 通常已經設定。
* 連接埠需求：http-80 https-443
* 驗證存取權限：
+
** 使用上述使用者名稱和密碼登入 Virtual Center Client
** 驗證 SDK 是否已啟用：telnet <vc_ip> 443






== 設定和連接

[cols="2*"]
|===
| 場地 | 描述 


| Name | 資料收集器的唯一名稱 


| 採集單元 | 收購單位名稱 
|===


== 配置

[cols="2*"]
|===
| 場地 | 描述 


| 虛擬中心IP位址 | 虛擬中心的IP位址 


| 使用者名稱 | 用於存取虛擬中心的使用者名 


| 密碼 | 用於存取虛擬中心的密碼 
|===


== 進階配置

在進階配置畫面中，勾選“*VM 效能*”方塊以收集效能資料。預設啟用庫存收集。可以配置以下欄位：

[cols="2*"]
|===


| 場地 | 描述 


| 庫存輪詢間隔（分鐘） | 預設值為 20 


| 過濾虛擬機 | 選擇叢集、資料中心或 ESX 主機 


| 選擇“排除”或“包含”來指定列表 | 建立過濾器清單（CLUSTER、DATACENTER 和/或 ESX_HOST） 


| 重試次數 | 預設值為 3 


| 通訊埠 | 預設值為 443 


| 過濾設備清單... | 此列表必須由精確的字串匹配組成 - 如果您打算按 ESX_HOST 進行過濾，則必須建立一個以逗號分隔的列表，其中包含Data Infrastructure Insights和 vSphere 中報告的 ESX 主機的精確「名稱」。這些「名稱」可以是 IP 位址、簡單主機名稱或完全限定網域名稱 (FQDN) - 這取決於這些主機最初新增至 vSphere 時的命名方式。按下 CLUSTER 過濾時，使用 CI 在虛擬機器管理程式上報告的Data Infrastructure Insights樣式的叢集名稱 - Data Infrastructure Insights在 vSphere 叢集名稱前面加上 vSphere 資料中心名稱和正斜線 - “DC1/clusterA”是Data Infrastructure Insights 資料中心名稱和正斜線 - “DC1/clusterA”是Data Infrastructure Insights將在資料中心名稱和正斜線 - “DC1/clusterA”是Data Infrastructure Insightss 將在資料中心名稱和正斜線 - “DC1/clusterA”是Data Infrastructure Insightss 所在資料中心名稱和正斜線 - “DC1/clusterA”中的集端管理程式報告 


| 效能輪詢間隔（秒） | 預設值為 300 
|===


== 將 VMware 標籤對應到Data Infrastructure Insights註釋

VMware 資料收集器可讓您使用在 VMware 上配置的標籤填入Data Infrastructure Insights註解。 DII 註解名稱必須與 VMware *類別* 名稱相同；然後標籤將套用為與類別同名的 DII 註解的註解值。Data Infrastructure Insights將始終填充同名的文字類型註釋，並將「盡最大努力」填充其他類型（數字、布林值等）的註釋。如果您的註釋屬於不同類型且資料收集器無法填充它，則可能需要刪除該註釋並將其重新建立為文字類型。

請注意，VMware 標籤可能區分大小寫，而Data Infrastructure Insights標籤不區分大小寫。因此，如果您在Data Infrastructure Insights中建立名為「OWNER」的註釋，並在 VMware 中建立名為「OWNER」、「Owner」和「owner」的標籤，則「owner」的所有這些變體都會對應到 Cloud Insight 的「OWNER」註釋。

請記住以下幾點：

* Data Infrastructure Insights目前僅自動發布NetApp設備的支援資訊。
* 由於此支援資訊以註釋形式保存，因此您可以在儀表板中查詢或使用它。
* 如果使用者覆蓋或清空註釋值，則當Data Infrastructure Insights更新註釋時，該值會再次自動填入（每天更新一次）。




== 故障排除

如果您在使用此資料收集器時遇到問題，請嘗試以下操作：



=== 存貨

[cols="2*"]
|===
| 問題： | 試試一下： 


| 錯誤：用於過濾虛擬機器的清單不能為空 | 如果選擇“包含清單”，請列出有效的資料中心、叢集或主機名稱來過濾虛擬機 


| 錯誤：無法實例化與 IP 上的 VirtualCenter 的連接 | 可能的解決方案：* 驗證輸入的憑證和 IP 位址。  * 嘗試使用 VMware Infrastructure Client 與 Virtual Center 通訊。  * 嘗試使用託管物件瀏覽器（例如​​ MOB）與虛擬中心進行通訊。 


| 錯誤：IP 處的 VirtualCenter 具有不符合 JVM 要求的憑證 | 可能的解決方案：* 建議：使用更強的（例如 1024 位元）RSA 金鑰為虛擬中心重新產生憑證。 * 不建議：修改 JVM java.security 配置以利用約束 jdk.certpath.disabledAlgorithms 來允許 512 位元 RSA 金鑰。看link:http://www.oracle.com/technetwork/java/javase/7u40-relnotes-2004172.html["JDK 7 更新 40 發行說明"] 。 


| 我看到以下訊息：“VMware 8.0.1 以下版本不支援 VMware 日誌包” | VMware 8.0.1 之前的版本不支援日誌收集。如果您希望使用Data Infrastructure Insights中的日誌收集功能，請將 VI Center Infrastructure 升級至 8.0.1 或更高版本。有關詳細信息，請參閱link:https://kb.netapp.com/Cloud/ncds/nds/dii/dii_kbs/Data_Infrastructure_Insights_Brocade_data_source_fails_performance_collection_with_a_timeout_due_to_default_SNMP_configuration["知識庫文章"]。 
|===
更多資訊可從link:concept_requesting_support.html["支援"]頁面或在link:reference_data_collector_support_matrix.html["數據收集器支援矩陣"]。
