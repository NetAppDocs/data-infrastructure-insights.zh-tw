---
sidebar: sidebar 
permalink: concept_dashboard_features.html 
summary: 儀表板功能和概念。 
keywords: dashboard, widget, custom, concepts, queries, variables, rollup, roll up, grouping, aggregate, aggregation, filter, axis, group by, expressions, timeseries, exact match, theme, visibility, formatting, conditional, hide, collapse, expand 
---
= 儀表板功能
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
儀表板和小部件為資料的顯示方式提供了極大的靈活性。以下概念可協助您充分利用自訂儀表板。

目錄：[]



== 小部件命名

小部件會根據第一個小部件查詢所選的物件、指標或屬性自動命名。如果您也為小工具選擇了分組，則「分組依據」屬性將包含在自動命名（聚合方法和指標）中。

image:WidgetNamingExample-C.png["小部件命名範例"]

選擇新的物件或分組屬性會更新自動名稱。

如果您不想使用自動小工具名稱，您可以簡單地輸入一個新名稱。



== 小部件的位置和大小

所有儀表板小工具都可以根據每個特定儀表板的需求進行定位和調整大小。



== 複製小部件

在儀表板編輯模式下，點擊小工具上的選單並選擇*複製*。小部件編輯器啟動，預先填入原始小部件的配置，並在小部件名稱中帶有「複製」後綴。您可以輕鬆進行任何必要的更改並保存新的小部件。該小部件將放置在儀表板的底部，您可以根據需要定位它。當所有變更完成後，請記住儲存您的儀表板。



== 顯示小工具圖例

儀表板上的大多數小部件都可以顯示或不顯示圖例。可透過以下任一方法在儀表板上開啟或關閉小工具中的圖例：

* 顯示儀表板時，按一下小工具上的「*選項*」按鈕，然後在選單中選擇「*顯示圖例*」。


隨著小部件中顯示的資料變化，該小部件的圖例也會動態更新。

當顯示圖例時，如果可以導覽至圖例指示的資產的登入頁面，則圖例將顯示為指向該資產頁面的連結。如果圖例顯示“全部”，按一下連結將顯示與小工具中第一個查詢對應的查詢頁面。



== 轉換指標

Data Infrastructure Insights為小部件中的某些指標（具體來說，那些稱為「自訂」或整合指標的指標，例如來自 Kubernetes、 ONTAP高級資料、Telegraf 外掛程式等）提供了不同的*轉換*選項，讓您以多種方式顯示資料。將可轉換指標新增至小工具時，您將看到一個下拉式選單，其中提供以下轉換選項：

無：數據按原樣顯示，不進行任何處理。

速率：當前值除以自上次觀察以來的時間範圍。

累積：先前值與目前值總和的累積。

Delta：前一個觀測值與目前值之間的差值。

增量率：增量值除以自上次觀察以來的時間範圍。

累積率：累積值除以自上次觀察以來的時間範圍。

請注意，轉換指標不會改變底層資料本身，只會改變資料的顯示方式。



== 儀表板小部件查詢和過濾器



=== 查詢

儀表板小工具中的查詢是管理資料顯示的強大工具。以下是有關小部件查詢的一些注意事項。

某些小部件最多可以有五個查詢。每個查詢都會在小部件中繪製自己的一組線條或圖形。在一個查詢上設定匯總、分組、頂部/底部結果等不會影響小部件的任何其他查詢。

您可以點擊眼睛圖示暫時隱藏查詢。當您隱藏或顯示查詢時，小工具顯示會自動更新。這使您可以在建立小部件時檢查顯示的資料是否包含單一查詢。

以下小部件類型可以有多個查詢：

* 面積圖
* 堆積面積圖
* 折線圖
* 樣條圖
* 單值小部件


其餘的小部件類型只能有一個查詢：

* 桌子
* 長條圖
* 箱線圖
* 散點圖




=== 在儀表板小工具查詢中進行過濾

您可以採取以下措施來充分利用過濾器。



==== 精確匹配過濾

如果將過濾字串括在雙引號中，Insight 會將第一個引號和最後一個引號之間的所有內容視為完全匹配。引號內的任何特殊字元或運算符將被視為文字。例如，過濾「*」將傳回文字星號的結果；在這種情況下，星號不會被視為通配符。當運算子 AND、OR 和 NOT 括在雙引號中時，它們也將被視為文字字串。

您可以使用精確匹配過濾器來尋找特定資源，例如主機名稱。如果您只想查找主機名稱“marketing”，但排除“marketing01”、“marketing-boston”等，只需將名稱“marketing”括在雙引號中。



==== 通配符和表達式

當您在查詢或儀表板小工具中篩選文字或清單值時，當您開始輸入時，系統會向您顯示基於目前文字建立*通配符篩選器*的選項。選擇此選項將傳回與通配符表達式相符的所有結果。您也可以使用 NOT 或 OR 建立*表達式*，或者您可以選擇「無」選項來過濾欄位中的空值。

image:Type-Ahead-Example-ingest.png["通配符過濾器"]

基於通配符或表達式的篩選器（例如 NOT、OR、「無」等）在篩選器欄位中以深藍色顯示。您直接從清單中選擇的項目顯示為淺藍色。

image:Type-Ahead-Example-Wildcard-DirectSelect.png["通配符過濾結果"]

請注意，通配符和表達式過濾適用於文字或列表，但不適用於數字、日期或布林值。



==== 具有上下文預先輸入建議的高級文字過濾

小部件查詢中的過濾是_上下文_的；當您為某個欄位選擇一個或多個過濾值時，該查詢的其他過濾器將顯示與該過濾器相關的值。例如，當為特定物件_Name_設定篩選器時，用於篩選_Model_的欄位將僅顯示與該物件名稱相關的值。

上下文過濾也適用於儀表板頁面變數（僅限文字類型屬性或註釋）。當您為一個變數選擇一個篩選器值時，任何其他使用相關物件的變數將僅根據這些相關變數的上下文顯示可能的篩選值。

請注意，只有文字過濾器才會顯示上下文預先輸入建議。日期、枚舉（清單）等不會顯示預先輸入建議。也就是說，您可以在枚舉（即清單）欄位上設定篩選器，並在上下文中過濾其他文字欄位。例如，在「資料中心」等枚舉欄位中選擇一個值，則其他篩選器將僅顯示該資料中心中的模型/名稱），但反之則不然。

所選的時間範圍也將為篩選器中顯示的資料提供背景。



==== 選擇過濾單元

當您在篩選器欄位中輸入值時，您可以選擇在圖表上顯示該值的單位。例如，您可以根據原始容量進行過濾並選擇以預設的 GiB 顯示，或選擇其他格式（如 TiB）。如果您的儀表板上有多個圖表以 TiB 為單位顯示值，並且您希望所有圖表都顯示一致的值，這將非常有用。

image:Filter_Unit_Format.png["在過濾器中選擇單位"]



==== 額外的過濾改進

以下內容可用於進一步優化您的過濾器。

* 使用星號可以搜尋所有內容。例如，
+
[listing]
----
vol*rhel
----
+
顯示以“vol”開頭並以“rhel”結尾的所有資源。

* 使用問號可以搜尋特定數量的字元。例如，
+
[listing]
----
BOS-PRD??-S12
----
+
顯示 _BOS-PRD12-S12_、_BOS-PRD13-S12_ 等等。

* OR 運算子使您能夠指定多個實體。例如，
+
[listing]
----
FAS2240 OR CX600 OR FAS3270
----
+
找到多個儲存模型。

* NOT 運算子可讓您從搜尋結果中排除文字。例如，
+
[listing]
----
NOT EMC*
----
+
尋找所有不以“EMC”開頭的內容。您可以使用

+
[listing]
----
NOT *
----
+
顯示不包含任何值的欄位。





=== 識別查詢和篩選器傳回的對象

查詢和篩選器傳回的物件與下圖所示的物件類似。分配有「標籤」的物件是註釋，而沒有標籤的物件是效能計數器或物件屬性。

image:ObjectsReturnedByFilters.png["過濾器傳回的對象"]



== 分組和聚合



=== 分組（匯總）

小部件中顯示的數據是根據採集期間收集的底層數據點分組（有時稱為匯總）的。例如，如果您有一個顯示隨時間變化的儲存 IOPS 的折線圖小部件，您可能希望看到每個資料中心的單獨線條，以便快速比較。您可以選擇透過以下幾種方式之一對這些資料進行分組：

* *平均值*：將每一行顯示為基礎資料的平均值。
* *最大值*：將每一行顯示為基礎資料的_最大值_。
* *最小值*：將每一行顯示為基礎資料的_最小值_。
* *總和*：將每一行顯示為基礎資料的總和。
* *計數*：顯示在指定時間範圍內報告資料的物件的數量。您可以選擇由儀表板時間範圍決定的_整個時間視窗_。


.步驟
若要設定分組方法，請執行下列操作。

. 在小部件的查詢中，選擇資產類型和指標（例如，_儲存_）和指標（例如_效能 IOPS 總計_）。
. 對於*群組*，選擇一種匯總方法（例如_平均值_），並選擇用於匯總資料的屬性或指標（例如，_資料中心_）。
+
該小部件會自動更新並顯示每個資料中心的資料。



您也可以選擇將所有基礎資料分組到圖表或表格中。在這種情況下，您將在小部件中獲得每個查詢的一行，它將顯示所有基礎資產的所選指標的平均值、最小值、最大值、總和或計數。

點擊任何按「全部」分組資料的小部件的圖例，將開啟一個查詢頁面，顯示小部件中使用的第一個查詢的結果。

如果您為查詢設定了篩選器，則資料將根據篩選後的資料分組。

請注意，當您選擇按任何欄位（例如，_Model_）對小部件進行分組時，您仍然需要按該欄位進行過濾，以便在圖表或表格上正確顯示該欄位的資料。



=== 聚合數據

您可以透過將資料點聚合到分鐘、小時或天的儲存桶中來進一步調整時間序列圖表（線、區域等），然後按屬性匯總資料（如果選擇）。您可以選擇根據資料點的「平均值」、「最大值」、「最小值」、「總和」或「計數」來聚合資料點。

較小的間隔與較長的時間範圍相結合可能會導致“聚合間隔導致數據點過多。”警告。如果您的間隔較小並且將儀表板時間範圍增加到 7 天，您可能會看到這種情況。在這種情況下，Insight 將暫時增加聚合間隔，直到您選擇較小的時間範圍。

您也可以在長條圖小工具和單值小工具中聚合資料。

大多數資產計數器預設聚合為_平均值_。某些計數器預設聚合為_Max、Min_或_Sum_。例如，連接埠錯誤預設聚合為_Sum_，而儲存 IOPS 聚合為_Average_。



== 顯示頂部/底部結果

在圖表小工​​具中，您可以顯示匯總資料的*頂部*或*底部*結果，並從提供的下拉清單中選擇顯示的結果數。在表格小工具中，您可以按任意列進行排序。



=== 圖表小部件頂部/底部

在圖表小工​​具中，當您選擇按特定屬性匯總資料時，您可以選擇查看前 N 個或後 N 個結果。請注意，當您選擇按所有屬性匯總時，您無法選擇頂部或底部結果。

您可以透過在查詢的 *顯示* 欄位中選擇 *頂部* 或 *底部*，然後從提供的清單中選擇一個值來選擇要顯示的結果。



=== 表格小工具顯示條目

在表格小工具中，您可以選擇表格結果中顯示的結果數。您無法選擇頂部或底部結果，因為表格可讓您根據需要按任意列升序或降序排序。

您可以從查詢的*顯示條目*欄位中選擇一個值來選擇儀表板上的表格中顯示的結果數。



== 表格小部件中的分組

表格小工具中的資料可以按任何可用屬性分組，使您能夠查看資料概覽，並深入了解更多詳細資訊。表格中的指標被匯總到每個折疊行中，以便於查看。

表格小工具可讓您根據設定的屬性對資料進行分組。例如，您可能希望表格顯示按儲存所在的資料中心分組的總儲存 IOPS。或者您可能想要顯示根據託管虛擬機器的虛擬機器管理程式分組的虛擬機器表。從清單中，您可以展開每個群組來查看該群組中的資產。

分組僅在表格小部件類型中可用。



=== 分組範例（包含總計說明）

表格小工具可讓您將資料分組以便於顯示。

在此範例中，我們將建立一個表格小工具，顯示按資料中心分組的所有虛擬機器。

.步驟
. 建立或開啟儀表板，並新增*表格*小工具。
. 選擇“虛擬機器”作為此小部件的資產類型。
. 點選列選擇器並選擇_Hypervisor name_ 和 _IOPS - Total_。
+
這些列現在顯示在表格中。

. 讓我們忽略任何沒有 IOPS 的虛擬機，只包含總 IOPS 大於 1 的虛擬機。點選“Filter by”*[+]*按鈕並選擇“IOPS - Total”。按一下“任何”，然後在“來自”欄位中輸入“1”。將「*to*」欄位留空。按 Enter 鍵或按一下篩選器欄位以套用篩選器。
+
此表現在顯示總 IOPS 大於或等於 1 的所有虛擬機器。請注意，表中沒有分組。顯示所有虛擬機器。

. 按一下「按 [+] 分組」*按鈕。
+
您可以按顯示的任何屬性或註釋進行分組。選擇「全部」可顯示單一群組中的所有虛擬機器。

+
任何效能指標的列標題都會顯示一個包含*向上捲動*選項的「三點」選單。預設的匯總方法是_平均_。這表示該組顯示的數字是組內每個虛擬機器報告的所有總 IOPS 的平均值。您可以選擇以「平均值」、「總和」、「最小值」或「最大值」來匯總此列。您顯示的任何包含績效指標的欄位都可以單獨匯總。

+
image:TableRollUp.png["捲起"]

. 按一下“全部”並選擇“虛擬機器管理程式名稱”。
+
VM 清單現在會按 Hypervisor 分組。您可以展開每個虛擬機器管理程式來查看其託管的虛擬機器。

. 按一下「*儲存*」將表格儲存到儀表板。您可以根據需要調整小部件的大小或移動它。
. 按一下“*儲存*”以儲存儀表板。




=== 績效數據匯總

如果您在表格小工具中包含效能資料列（例如，_IOPS - Total_），則當您選擇將資料分組時，您可以選擇該列的總計方法。預設的匯總方法是顯示群組行中基礎資料的平均值（_avg_）。您也可以選擇顯示資料的總和、最小值或最大值。



== 儀表板時間範圍選擇器

您可以選擇儀表板資料的時間範圍。只有與所選時間範圍相關的資料才會顯示在儀表板的小工具中。您可以從以下時間範圍中進行選擇：

* 最後15分鐘
* 最後30分鐘
* 最後60分鐘
* 最近 2 小時
* 最近 3 小時（這是預設值）
* 近 6 小時
* 過去 12 小時
* 過去 24 小時
* 過去 2 天
* 過去 3 天
* 過去 7 天
* 過去 30 天
* 自訂時間範圍
+
自訂時間範圍可讓您選擇最多連續 31 天。您也可以設定此範圍的開始時間和結束時間。預設開始時間為所選第一天的凌晨 12:00，預設結束時間為所選最後一天的晚上 11:59。點選「*套用*」將會將自訂時間範圍套用到儀表板。





=== 放大到某個時間範圍

在查看時間序列小工具（線、樣條線、面積、堆積面積）或登入頁面上的圖表時，您可以將滑鼠拖曳到圖表上進行放大。然後，您可以在螢幕的右上角鎖定該時間範圍，以便其他頁面上的圖表反映該鎖定時間範圍內的資料。若要解鎖，請從清單中選擇不同的時間範圍。



== 覆蓋單一小部件中的儀表板時間

您可以在單一小工具中覆蓋主儀表板時間範圍設定。這些小部件將根據其設定的時間範圍而不是儀表板的時間範圍顯示資料。

若要覆蓋儀表板時間並強制小工具使用其自己的時間範圍，請在小部件的編輯模式中選擇所需的時間範圍，然後將小部件儲存到儀表板。

無論您在儀表板上選擇的時間範圍是什麼，小部件都會根據為其設定的時間範圍顯示其數據。

您為一個小部件設定的時間範圍不會影響儀表板上的任何其他小部件。

image:OverrideTimeOnWidget.png["覆蓋小部件的儀表板時間範圍"]



== 主軸和次軸

不同的指標使用不同的測量單位來表示圖表中報告的數據。例如，在查看 IOPS 時，測量單位是每秒的 I/O 操作數（IO/s），而延遲純粹是時間的度量（毫秒、微秒、秒等）。當使用一組 Y 軸值在單一折線圖上繪製這兩個指標時，延遲數（通常為幾毫秒）與 IOPS（通常以千為單位）以相同的比例繪製，且延遲線在該比例下會遺失。

但是，透過在主（左側） Y 軸上設定一個測量單位，在次（右側） Y 軸上設定另一個測量單位，可以在一個有意義的圖表上繪製這兩組數據。每個指標都按照自己的比例繪製。

.步驟
此範例說明了圖表小部件中主軸和次軸的概念。

. 建立或開啟儀表板。為儀表板新增折線圖、樣條圖、面積圖或堆積面積圖小工具。
. 選擇一種資產類型（例如「儲存」），然後選擇「IOPS - Total」作為第一個指標。設定您喜歡的任何過濾器，並根據需要選擇匯總方法。
+
圖表上顯示 IOPS 線，其比例顯示在左側。

. 點選*[+查詢]*向圖表新增第二條線。對於此行，選擇“延遲 - 總計”作為指標。
+
請注意，該線在圖表底部顯示為平面。這是因為它是以與 IOPS 線相同的比例繪製的。

. 在延遲查詢中，選擇*Y 軸：次要*。
+
延遲線現在按照自己的比例繪製，顯示在圖表的右側。



image:SecondaryAxisExplained.png["次坐標軸範例"]



== 小部件中的表達式

在儀表板中，任何時間序列小部件（線、樣條線、區域、堆疊區域）、條形圖、長條圖、圓餅圖或表格小部件都允許您根據所選指標建立表達式，並在單一圖表（或列）中顯示這些表達式的結果<<expressions-in-a-table-widget,表格小工具>>）。下面的例子使用表達式來解決具體問題。在第一個範例中，我們希望顯示讀取 IOPS 佔租用戶上所有儲存資產的總 IOPS 的百分比。第二個範例可以讓您了解租用戶上發生的「系統」或「開銷」 IOPS——那些不是直接來自讀取或寫入資料的 IOPS。

您可以在表達式中使用變數（例如，_$Var1 * 100_）



=== 表達式範例：讀取 IOPS 百分比

在此範例中，我們希望顯示讀取 IOPS 佔總 IOPS 的百分比。您可以將其視為以下公式：

 Read Percentage = (Read IOPS / Total IOPS) x 100
此數據可以以折線圖的形式顯示在您的儀表板上。為此，請按照下列步驟操作：

.步驟
. 建立新的儀表板，或以編輯模式開啟現有儀表板。
. 在儀表板中新增一個小工具。選擇*面積圖*。
+
該小部件以編輯模式開啟。預設情況下，會顯示查詢，其中顯示「儲存」資產的「IOPS - 總計」。如果需要，請選擇不同的資產類型。

. 點擊右側的*轉換為表達式*連結。
+
目前查詢轉換為表達式模式。請注意，在表達模式下您無法變更資產類型。當您處於表達模式時，連結將變更為*恢復查詢*。如果您希望隨時切換回查詢模式，請按一下此按鈕。請注意，在模式之間切換會將欄位重設為預設值。

+
現在，保持表達模式。

. *IOPS - Total* 指標現在位於字母變數欄位「*a*」中。在“*b*”變數欄位中，按一下*選擇*並選擇*IOPS - 讀取*。
+
您可以透過點擊變數欄位後面的 + 按鈕，為表達式添加最多五個字母變數。對於我們的讀取百分比範例，我們只需要總 IOPS（“*a*”）和讀取 IOPS（“*b*”）。

. 在「*表達式*」欄位中，您可以使用與每個變數對應的字母來建立表達式。我們知道讀取百分比 = (讀取 IOPS / 總 IOPS) x 100，因此我們可以將此表達式寫成：
+
 (b / a) * 100
. *標籤* 欄位標識表達式。將標籤更改為“閱讀百分比”，或對您來說同樣有意義的內容。
. 將*單位*欄位變更為“％”或“百分比”。
+
此圖表顯示所選儲存裝置隨時間變化的 IOPS 讀取百分比。如果需要，您可以設定篩選器，或選擇不同的總計方法。請注意，如果您選擇「總和」作為總計方法，則所有百分比值都會加在一起，其值可能會高於 100%。

. 點擊“*儲存*”將圖表儲存到您的儀表板。




=== 表達式範例：“系統” I/O

範例 2：從資料來源收集的指標包括讀取、寫入和總 IOPS。但是，資料來源報告的 IOPS 總數有時包括「系統」IOPS，即那些不直接屬於資料讀取或寫入的 IO 操作。該系統 I/O 也可以被認為是「開銷」 I/O，對於正常的系統操作是必需的，但與資料操作沒有直接關係。

為了顯示這些系統 I/O，您可以從採集報告的總 IOPS 中減去讀取和寫入 IOPS。公式可能如下所示：

 System IOPS = Total IOPS - (Read IOPS + Write IOPS)
然後，這些數據可以在儀表板上以折線圖的形式顯示。為此，請按照下列步驟操作：

.步驟
. 建立新的儀表板，或以編輯模式開啟現有儀表板。
. 在儀表板中新增一個小工具。選擇*折線圖*。
+
該小部件以編輯模式開啟。預設情況下，會顯示查詢，其中顯示「儲存」資產的「IOPS - 總計」。如果需要，請選擇不同的資產類型。

. 在「*匯總*」欄位中，選擇「按_全部_求和」。
+
圖表顯示一條線，表示總 IOPS 的總和。

. 按一下「複製此查詢」圖示以建立查詢的副本。
+
查詢的副本被加入到原始查詢的下方。

. 在第二個查詢中，按一下「轉換為表達式」按鈕。
+
目前查詢轉換為表達式模式。如果您希望隨時切換回查詢模式，請按一下「*復原查詢*」。請注意，在模式之間切換會將欄位重設為其預設值。

+
現在，保持表達模式。

. _IOPS - Total_ 指標現在位於字母變數欄位「*a*」中。按一下“_IOPS - Total_”並將其變更為“_IOPS - Read_”。
. 在「*b*」變數欄位中，按一下*選擇*並選擇_IOPS - 寫入_。
. 在「*表達式*」欄位中，您可以使用與每個變數對應的字母來建立表達式。我們將表達式簡單寫成：
+
 a + b
+
在顯示部分，為此表達式選擇*面積圖*。

. *標籤* 欄位標識表達式。將標籤變更為“系統 IOPS”，或對您來說同樣有意義的標籤。
+
此圖表以折線圖的形式顯示總 IOPS，下方的區域圖顯示讀取和寫入 IOPS 的組合。兩者之間的差距體現的是與資料讀取或寫入操作沒有直接關係的IOPS。這些就是您的“系統”IOPS。

. 點擊“*儲存*”將圖表儲存到您的儀表板。


要在表達式中使用變量，只需鍵入變數名稱，例如 _$var1 * 100_。表達式中只能使用數字變數。



=== 表格小工具中的表達式

表格小工具處理表達式的方式略有不同。單一表格小工具中最多可以有五個表達式，每個表達式都會以新列新增到表格中。每個表達式最多可以包含五個要執行計算的值。您可以輕鬆地為該列命名一個有意義的名稱。

image:ExpressionExample.png["表格小工具中的表達式"]



== 變數

變數可讓您一次變更儀表板上部分或全部小工具中顯示的資料。透過設定一個或多個小部件使用一個公共變量，在一個地方所做的更改會導致每個小部件中顯示的數據自動更新。



=== 變數類型

變數可以是以下類型之一：

* *屬性*：使用物件的屬性或指標進行篩選
* *註解*：使用預先定義的link:task_defining_annotations.html["註解"]過濾小部件資料。
* *文字*：字母數字字串。
* *數字*：一個數字值。根據您的小部件字段，可以單獨使用，也可以將其作為“從”或“到”值。
* *布林值*：用於值為 True/False、Yes/No 等的欄位。對於布林變量，選擇有 Yes、No、None、Any。
* *日期*：日期值。根據您的小部件的配置，用作“從”或“到”值。


image:Variables_Drop_Down_Showing_Annotations.png["變數類型"]



==== 屬性變數

選擇屬性類型變數可讓您過濾包含指定屬性值的小部件資料。下面的範例顯示了一個線形小部件，其中顯示了代理節點的可用記憶體趨勢。我們為代理節點 IP 建立了一個變量，目前設定為顯示所有 IP：

image:Variables_Node_Example_Before_Variable_Applied.png["變數過濾器之前的代理節點"]

但是，如果您暫時只想查看租戶上各個子網路上的節點，則可以將變數設定或變更為特定的代理節點 IP 或 IP。這裡我們只查看「123」子網路上的節點：

image:Variables_Node_Example_After_Variable_Applied.png["變數過濾器後的代理節點"]

您也可以設定一個變數來過濾具有特定屬性的所有對象，而不管對象類型如何，例如具有“vendor”屬性的對象，方法是在變數欄位中指定 _*.vendor_。您不需要輸入“*。”；如果您選擇通配符選項， Data Infrastructure Insights將提供此資訊。

image:Variables_Attribute_Vendor_Example.png["供應商的屬性變數"]

當您下拉變數值的選項清單時，結果會被過濾，因此僅顯示基於儀表板上的物件的可用供應商。

image:Variables_Attribute_Vendor_Filtered_List.png["屬性變數僅顯示可用的供應商"]

如果您在儀表板上編輯與屬性篩選器相關的視窗小工具（即視窗小工具的物件包含任何 _*.vendor 屬性_），它會顯示屬性篩選器已自動套用。

image:Variables_Attribute_inWidgetQuery.png["自動應用屬性變數"]

應用變數就像更改您選擇的屬性資料一樣簡單。



==== 註解變數

選擇註釋變數可讓您篩選與該註解關聯的對象，例如屬於相同資料中心的對象。

image:Variables_Annotation_Filtering.png["使用變數進行註釋過濾"]



==== 文字、數字、日期或布林變量

您可以透過選擇變數類型「_Text_」、「_Number_」、「_Boolean_」或「_Date_」來建立與特定屬性無關的通用變數。一旦建立了變量，您就可以在小部件過濾器欄位中選擇它。在小部件中設定篩選器時，除了可以為篩選器選擇的特定值之外，為儀表板建立的任何變數都會顯示在清單中 - 這些變數分組在下拉式選單中的「變數」部分下，名稱以「$」開頭。在此篩選器中選擇變數將允許您搜尋在儀表板本身的變數欄位中輸入的值。任何在過濾器中使用該變數的小部件都會動態更新。

image:Variables_in_a_Widget_Filter.png["在小部件中選擇變數"]



==== 變數過濾範圍

當您在儀表板上新增註解或屬性變數時，該變數可以套用於儀表板上的所有小部件，這表示儀表板上的所有小部件都會顯示根據您在變數中設定的值進行過濾的結果。

image:Variables_Automatic_Filter_Button.png["自動過濾器"]

請注意，只有屬性和註解變數可以像這樣自動過濾。非註解或屬性變數無法自動過濾。必須將各個小部件分別配置為使用這些類型的變數。

若要停用自動過濾，以便變數僅適用於您專門設定的小工具，請按一下「自動過濾」滑桿將其停用。

若要在單一小工具中設定變量，請在編輯模式下開啟該小工具，然後在「Filter By」欄位中選擇特定的註解或屬性。使用註解變數，您可以選擇一個或多個特定值，或選擇變數名稱（先前導「$」表示）以允許在儀表板層級輸入變數。這同樣適用於屬性變數。只有您設定了變數的小工具才會顯示過濾結果。

變數中的篩選是_上下文_的；當您為變數選擇一個或多個篩選值時，頁面上的其他變數將僅顯示與該篩選器相關的值。例如，當變數過濾器設定為特定儲存_Model_時，設定為儲存_Name_過濾的任何變數將僅顯示與該模型相關的值。

要在表達式中使用變量，只需鍵入變數名稱作為表達式的一部分，例如，_$var1 * 100_。表達式中只能使用數字變數。您不能在表達式中使用數字註解或屬性變數。

變數中的篩選是_上下文_的；當您為變數選擇一個或多個篩選值時，頁面上的其他變數將僅顯示與該篩選器相關的值。例如，當變數過濾器設定為特定儲存_Model_時，設定為儲存_Name_過濾的任何變數將僅顯示與該模型相關的值。



==== 變數命名

變數名稱：

* 必須只包含字母 az、數字 0-9、句點 (.)、底線 (_) 和空格 ( )。
* 不能超過 20 個字元。
* 區分大小寫：$CityName 和 $cityname 是不同的變數。
* 不能與現有的變數名相同。
* 不能為空。




== 格式化儀表小部件

實體和子彈量規小工具可讓您設定_警告_和/或_臨界_等級的閾值，從而清晰地表示您指定的資料。

image:GaugeWidgetFormatting.png["儀表小部件的格式設置"]

若要設定這些小部件的格式，請依照下列步驟操作：

. 選擇是否要反白顯示大於 (>) 或小於 (<) 閾值的值。在這個例子中，我們將突出顯示大於（>）閾值水平的值。
. 為“警告”閾值選擇一個值。當小部件顯示大於此等級的值時，它會以橘色顯示儀表。
. 為“關鍵”閾值選擇一個值。大於此水平的值將導致儀表顯示為紅色。


您可以選擇儀表的最小值和最大值。低於最小值的值將不會顯示儀表。高於最大值的值將顯示滿量表。如果您未選擇最小值或最大值，小部件將根據小部件的值選擇最佳最小值和最大值。

image:Gauge-Solid.png["實心/傳統規格，寬度=374"] image:Gauge-Bullet.png["子彈規格，寬度=374"]



== 格式化單值小部件

在單值小工具中，除了設定警告（橘色）和臨界（紅色）閾值外，您還可以選擇以綠色或白色背景顯示「範圍內」值（低於警告等級的值）。

image:Single-ValueWidgets.png["帶格式和不帶格式的單值小部件"]

點擊單值小工具或儀表小工具中的連結將顯示與小工具中第一個查詢相對應的查詢頁面。



== 格式化表格小部件

與單值和儀表小工具一樣，您可以在表格小工具中設定條件格式，從而可以使用顏色和/或特殊圖示來突出顯示資料。

條件格式可讓您在表格小工具中設定和突出顯示警告等級和臨界等級閾值，從而可以立即看到異常值和異常資料點。

image:ConditionalFormattingExample.png["條件格式範例"]

表中的每一列均單獨設定條件格式。例如，您可以為容量列選擇一組閾值，為吞吐量列選擇另一組閾值。

若變更某一列的單位顯示，條件格式將保留並反映數值的變化。儘管顯示單位不同，下面的圖像仍顯示相同的條件格式。

image:ConditionalFormatting_GiB.png["條件格式 - GiB"] image:ConditionalFormatting_TiB.png["條件格式 - TiB"]

您可以選擇將條件格式顯示為顏色、圖示或兩者。



== 選擇顯示資料的單位

儀表板上的大多數小工具可讓您指定顯示值的單位，例如_兆位元組_、_千_、_百分比_、_毫秒 (ms)_ 等。在許多情況下，Data Infrastructure Insights知道所獲取資料的最佳格式。在不知道最佳格式的情況下，您可以設定所需的格式。

在下面的折線圖範例中，已知為小工具選擇的資料以_位元組_（基本 IEC 資料單位：請參閱下表）為單位，因此基本單位會自動選擇為「位元組 (B)」。但是，資料值足夠大，可以表示為吉比位元組 (GiB)，因此Data Infrastructure Insights將值自動格式化為 GiB。圖表上的 Y 軸以「GiB」為顯示單位，所有數值均以該單位顯示。

image:used_memory_in_bytes.png["基本單位位元組（以千兆位元組為單位），寬度=640"]

如果您想以不同的單位顯示圖表，您可以選擇另一種格式來顯示數值。由於此範例中的基本單位是_位元組_，因此您可以從支援的「基於位元組」的格式中進行選擇：位元 (b)、位元組 (B)、千比位元組 (KiB)、兆比位元組 (MiB)、吉比位元組 (GiB)。  Y 軸標籤和值會根據您選擇的格式而變化。

image:used_memory_in_bytes_gb.png["選擇顯示單位，寬度=640"]

如果不知道基本單位，則可以從link:#available-units["可用單位"]，或輸入您自己的。一旦分配了基本單位，您就可以選擇以適當的支援格式之一顯示資料。

image:bits_per_second.png["選擇您自己的基本單位，寬度=320"]

若要清除設定並重新開始，請按一下「*重設預設值*」。



=== 關於自動套用格式

大多數指標都是由資料收集器以最小單位報告的，例如整數 1,234,567,890 位元組。預設情況下，Data Infrastructure Insights將自動格式化該值以實現最易讀的顯示。例如，1,234,567,890 位元組的資料值將自動格式化為 1.23 _Gibibytes_。您可以選擇以其他格式顯示它，例如_Mebibytes_。該值將會相應顯示。


NOTE: Data Infrastructure Insights使用美式英語數位命名標準。美國的「billion」相當於「chill million」。



=== 具有多個查詢的小部件

如果您有一個時間序列小部件（即線、樣條線、區域、堆疊區域），其中有兩個查詢，並且都繪製了主 Y 軸，則基本單位不會顯示在 Y 軸的頂部。但是，如果您的小部件在主 Y 軸上有一個查詢，在輔助 Y 軸上也有一個查詢，則會顯示每個查詢的基本單位。

image:UnitsOnPrimaryAndSecondaryYAxis.png["兩個 Y 軸上的單位"]

如果您的小部件有三個或更多查詢，則基本單位不會顯示在 Y 軸上。



=== 可用單位

下表按類別顯示了所有可用的單位。

|===


| *類別* | *單位* 


| 貨幣 | 美分 


| 數據（IEC） | 位元 位元組 千比位元組 兆比位元組 吉比位元組 太比位元組 皮比位元組 艾比位元組 


| 數據速率（IEC） | 位元/秒 位元組/秒 千比位元組/秒 兆比位元組/秒 吉比位元組/秒 太比位元組/秒 皮比位元組/秒 


| 數據（公制） | 千字節 兆字節 千兆字節 太字節 拍字節 艾字節 


| 數據速率（公制） | 千位元組/秒 兆位元組/秒 千兆位元組/秒 太位元組/秒 拍位元組/秒 艾字節/秒 


| 國際電工委員會 | kibi mebi gibi tebi pebi exbi 


| 十進位 | 整數千百萬十億萬億 


| 百分比 | 百分比 


| 時間 | 奈秒 微秒 毫秒 秒 分鐘 小時 


| 溫度 | 攝氏度華氏度 


| 頻率 | 赫茲 千赫茲 兆赫 千兆赫茲 


| 中央處理器 | 奈米核心 微核心 毫核心 千核心 兆核心 千兆核心 teracores petacores exacores 


| 吞吐量 | I/O 操作數/秒 操作數/秒 請求數/秒 讀取數/秒 寫入數/秒 操作數/分鐘 讀取數/分鐘 寫入數/分鐘 
|===


== 電視模式和自動刷新

儀表板和資產登陸頁面上的小部件中的資料根據所選儀表板時間範圍確定的刷新間隔自動刷新。刷新間隔取決於小部件是時間序列（線、樣條線、面積、堆積面積圖）還是非時間序列（所有其他圖表）。

|===


| 儀表板時間範圍 | 時間序列刷新間隔 | 非時間序列刷新間隔 


| 最後15分鐘 | 10秒 | 1分鐘 


| 最後30分鐘 | 15秒 | 1分鐘 


| 最後60分鐘 | 15秒 | 1分鐘 


| 最近 2 小時 | 30秒 | 5分鐘 


| 過去 3 小時 | 30秒 | 5分鐘 


| 近 6 小時 | 1分鐘 | 5分鐘 


| 過去 12 小時 | 5分鐘 | 10分鐘 


| 過去 24 小時 | 5分鐘 | 10分鐘 


| 過去 2 天 | 10分鐘 | 10分鐘 


| 過去 3 天 | 15分鐘 | 15分鐘 


| 過去 7 天 | 1小時 | 1小時 


| 過去 30 天 | 2小時 | 2小時 
|===
每個小部件在其右上角顯示其自動刷新間隔。

自訂儀表板時間範圍不提供自動刷新功能。

與*電視模式*結合使用時，自動刷新功能可以在儀表板或資產頁面上近乎即時地顯示資料。電視模式提供整潔的顯示；導航選單被隱藏，為您的數據顯示提供了更多的螢幕空間，編輯按鈕也是如此。電視模式忽略典型的Data Infrastructure Insights逾時，使顯示保持即時狀態，直到手動或透過授權安全協定自動登出。


NOTE: 由於NetApp Console自己的使用者登入逾時時間為 7 天，因此Data Infrastructure Insights也必須在該事件發生時登出。您只需再次登錄，您的儀表板將繼續顯示。

* 若要啟動電視模式，請點選電視模式按鈕。
* 若要停用電視模式，請點選畫面左上角的「退出」按鈕。


您可以點擊右上角的暫停按鈕暫時停止自動刷新。暫停時，儀表板時間範圍欄位將顯示暫停資料的活動時間範圍。自動刷新暫停時，您的資料仍在取得和更新。點擊“恢復”按鈕繼續自動刷新資料。

image:AutoRefreshPaused.png["自動刷新已暫停"]



== 儀表板組

透過分組，您可以檢視和管理相關的儀表板。例如，您可以擁有一個專用於租戶儲存的儀表板組。儀表板組在「儀表板」>「顯示所有儀表板」頁面上進行管理。

image:DashboardGroupNoPin.png["儀表板分組"]

預設顯示兩個群組：

* *所有儀表板*列出了所有已建立的儀表板，無論所有者是誰。
* *我的儀表板*僅列出目前使用者建立的儀表板。


每個組別中包含的儀表板數量顯示在群組名稱旁邊。

若要建立新群組，請按一下「+」以建立新儀表板組按鈕。輸入群組的名稱，然後按一下「建立群組」。將以該名稱建立一個空組。

要將儀表板新增至群組，請按一下“所有儀表板”群組以顯示租用戶上的所有儀表板，或者如果您只想查看您擁有的儀表板，請按一下“我的儀表板”，然後執行下列操作之一：

* 若要新增單一儀表板，請按一下儀表板右側的選單並選擇「新增至群組」。
* 若要將多個儀表板新增至一個群組，請按一下每個儀表板旁的核取方塊來選取它們，然後按一下「批次操作」按鈕並選擇「新增至群組」。


透過選擇「從群組中刪除」以相同方式從目前群組中刪除儀表板。您無法從「所有儀表板」或「我的儀表板」群組中刪除儀表板。


NOTE: 從群組中刪除儀表板並不會從Data Infrastructure Insights中刪除該儀表板。若要完全刪除儀表板，請選擇儀表板並按一下「刪除」。這會將其從其所屬的任何群組中刪除，並且任何使用者都無法再使用它。



== 固定您喜歡的儀表板

您可以透過將喜愛的儀表板固定到儀表板清單頂部來進一步管理儀表板。要固定儀表板，只需單擊將滑鼠懸停在任何清單中的儀表板上時顯示的圖釘按鈕即可。

儀表板固定/取消固定是個人使用者的偏好，與儀表板所屬的群組（或多個群組）無關。

image:DashboardPin.png["固定儀表板"]



== 黑暗主題

您可以選擇使用淺色主題（預設）來顯示Data Infrastructure Insights，該主題使用淺色背景和深色文字顯示大多數螢幕，或使用深色主題（使用深色背景和淺色文字顯示大多數螢幕）。

若要在明暗主題之間切換，請點擊螢幕右上角的使用者名稱按鈕並選擇所需的主題。

image:DarkThemeSwitch.png["在明暗主題之間切換"]

深色主題儀表板視圖：image:DarkThemeDashboardExample.png["深色主題儀表板範例"]

淺色主題儀表板檢視：image:LightThemeDashboardExample.png["淺色主題儀表板範例"]


NOTE: 某些螢幕區域（例如某些小工具圖表）即使在深色主題下查看仍會顯示淺色背景。



== 折線圖插值

不同的資料收集器通常以不同的間隔輪詢其資料。例如，資料收集器 A 可能每 15 分鐘輪詢一次，而資料收集器 B 可能每 5 分鐘輪詢一次。當折線圖視窗小部件（也包括樣條曲線、面積圖和堆積面積圖）將來自多個數據收集器的數據聚合到一條線中（例如，當窗口小部件按「全部」分組時），並每五分鐘刷新一次線時，來自收集器 B 的數據可能會準確顯示，而來自收集器 A 的數據可能會有間隙，從而影響聚合，直到收集器 A 再次影響。

為了緩解這種情況，Data Infrastructure Insights在聚合時插入數據，使用周圍的數據點對數據進行“最佳猜測”，直到數據收集器再次輪詢。您始終可以透過調整小部件的分組來單獨查看每個資料收集器的物件資料。



=== 插值方法

建立或修改折線圖（或樣條圖、面積圖或堆積面積圖）時，可以將內插法設定為三種類型之一。在「分組依據」部分中，選擇所需的內插。

image:Interpolation_Methods.png["小部件編輯器的分組部分顯示了三種插值方法"]

* *無*：不執行任何操作，即不在中間生成點。


image:Interpolation_None.png["簡單的直角線，表示資料點之間沒有內插"]

* *樓梯*：一個點由前一個點的值產生。在直線上，這將顯示為典型的“樓梯”佈局。


image:Interpolation_Stair.png["顯示階梯插值的簡單直線"]

* *線性*：產生一個點作為連接兩點之間的值。產生一條看起來像連接兩點的線，但有額外的（插值的）資料點。


image:Interpolation_Linear.png["簡單的直線顯示線性插值，每個原始點之間都有附加資料點"]



=== 線部件中的異常界限

當在儀表板或登入頁面上包含折線圖或樣條圖小工具時，您可以選擇在資料的*預期邊界*上下文中查看圖表。您可以將其視為尋找資料模式中的異常。

DII 使用季節性資料（每小時或每天）來設定在給定時間內資料下降的預期上限和下限。如果資料高於或低於預期界限，圖表將會反白顯示為異常。

image:expected_bounds_example_showing_spike.png["異常邊界範例 - 顯示實際資料峰值高於預期邊界，寬度=600"]

若要查看異常邊界，請編輯小工具並選擇“顯示異常邊界”。您可以從兩種檢測演算法中進行選擇：

* *自適應探測器*能夠快速適應變化，有助於進行詳細調查。
* *平滑偵測器* 最大限度地減少噪音和誤報，濾除短期波動，同時仍能偵測到顯著的變化。


此外，您可以選擇顯示「每小時」或「每日」季節性，以及設定偵測的敏感度。  _高_靈敏度偵測到更多的邊界跨越，_低_靈敏度偵測到的邊界跨越較少。

image:expected_bounds_settings.png["異常邊界的設置，包括偵測演算法、季節性和敏感度"]

請記住，只有當圖表設定為顯示單線時，您才可以查看預期邊界。如果您的分組依據設定或篩選器顯示多行，或者您為小工具設定了多個查詢，則顯示預期邊界的選項將被停用。
