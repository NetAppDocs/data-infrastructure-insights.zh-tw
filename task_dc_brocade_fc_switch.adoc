---
sidebar: sidebar 
permalink: task_dc_brocade_fc_switch.html 
keywords: data collector, Brocade, FC switch, 
summary: 配置Brocade FC 交換器資料收集器。 
---
= Brocade FC交換器資料擷取器
:hardbreaks:
:allow-uri-read: 


[role="lead"]
Data Infrastructure Insights使用Brocade FC 交換器 (SSH) 資料來源來發現執行 Factored 作業系統 (FOS) 韌體 4.2 及更高版本的Brocade或更名交換器設備的庫存。支援 FC 交換器和存取網關模式的設備。



== 術語

Data Infrastructure Insights從Brocade FC 交換器資料收集器取得以下庫存資訊。對於Data Infrastructure Insights取得的每種資產類型，都會顯示用於該資產的最常用術語。當查看或排除此資料收集器的故障時，請記住以下術語：

[cols="2*"]
|===
| 供應商/型號術語 | Data Infrastructure Insights術語 


| 轉變 | 轉變 


| 港口 | 港口 


| 虛擬結構、實體結構 | 織物 


| 區 | 區 


| 邏輯交換機 | 邏輯交換機 


| 虛擬磁碟區 | 體積 


| LSAN 區域 | IVR區域 
|===
注意：這些只是常見的術語映射，可能並不代表此資料收集器的所有情況。



== 要求

* Data Infrastructure Insights採集單元 (AU) 將啟動與Brocade交換器上的 TCP 連接埠 22 的連線以收集庫存資料。  AU 也將啟動與 UDP 連接埠 161 的連線以收集效能資料。
* 結構中的所有交換器都必須具有 IP 連線。如果選取「發現結構中的所有交換器」複選框，Data Infrastructure Insights將識別結構中的所有交換器；但是，它需要與這些額外的交換器建立 IP 連接才能發現它們。
* 結構中的所有交換器都需要全域使用相同的帳戶。您可以使用PuTTY（開源終端機模擬器）來確認存取。
* 連接埠 161 和 162 必須對結構中的所有交換器開放，以進行 SNMP 效能輪詢。
* SNMP 唯讀社群字串




== 配置

[cols="2*"]
|===
| 場地 | 描述 


| 切換 IP | EFC 伺服器的 IP 位址或完全限定域名 


| 使用者名稱 | 交換器的用戶名 


| 密碼 | 交換器密碼 


| SNMP | SNMP版本 


| SNMP 社群字串 | 用於存取交換器的 SNMP 唯讀社群字串 


| SNMP 使用者名稱 | SNMP使用者名稱 


| SNMP 密碼 | SNMP 密碼 
|===


== 進階配置

[cols="2*"]
|===
| 場地 | 描述 


| 布料名稱 | 資料收集器要報告的織物名稱。留空則將結構名稱報告為 WWN。 


| 庫存輪詢間隔（分鐘） | 庫存調查之間的間隔。預設值為 15。 


| 排除的設備 | 要從輪詢中排除的裝置 ID 的逗號分隔列表 


| 管理域處於活動狀態 | 如果使用管理網域，請選擇 


| 檢索 MPR 數據 | 選擇從多協定路由器取得路由資料。 


| 啟用陷印 | 選擇在從裝置接收到 SNMP 陷阱時啟用擷取。如果選擇啟用捕獲，則也必須啟動 SNMP。 


| 陷阱之間的最短時間（秒） | 陷阱觸發的獲取嘗試之間的最短時間。預設值為 10。 


| 發現結構中的所有交換機 | 選擇發現結構中的所有交換機 


| 選擇支援 HBA 還是區域別名 | 選擇是否支援 HBA 或區域別名 


| 效能輪詢間隔（秒） | 效能輪詢之間的間隔。預設值為 300。 


| SNMP 認證協議 | SNMP 驗證協定（僅限 SNMP v3） 


| SNMP 隱私密碼 | SNMP 隱私密碼（僅限 SNMP v3） 


| SNMP 重試 | SNMP 重試次數 
|===


== 故障排除

如果您在使用此資料收集器時遇到問題，請嘗試以下操作：



=== 存貨

[cols="2*"]
|===
| 問題： | 試試一下： 


| Brocade資料來源的庫存取得失敗，並出現以下錯誤：<date> <time> 錯誤 [com.onaro.sanscreen.acquisition.framework.datasource.BaseDataSource] 錯誤 2（共 2 個）：<datasource name> [內部錯誤] - 無法為裝置 <IP> 產生模型。偵測提示錯誤 ([裝置名稱 <name>]: 無法為裝置 <IP> 產生模型。錯誤檢測提示） | 該問題可能是由於Brocade交換器返回提示的時間過長，超過了預設的 5 秒超時時間而引起的。在Data Infrastructure Insights中的資料收集器的進階配置設定中，嘗試將_SSH Banner Wait Timeout (sec)_增加到更高的值。 


| 錯誤：“Data Infrastructure Insights收到無效的機箱角色” | 檢查該資料來源中已配置的使用者是否已被授予chassis角色權限。 


| 錯誤：“機箱 IP 位址不符” | 一般來說，DII 不支援擷取單元和裝置之間的網路位址轉換或連接埠位址轉換。  DII 可能偵測到收集器配置中的主機名稱/IP 位址與裝置認為擁有的任何位址不符。 


| 收到一則訊息，提示有多個節點登入 Access Gateway 連接埠 | 檢查 NPV 設備是否正常運作以及所有連接的 WWN 是否符合預期。不要直接取得 NPV 設備。相反，取得核心結構交換器將收集 NPV 設備資料。 


| 錯誤：....登入的最大遠端會話數... | FOS 對每個使用者角色支援的並發 SSH 會話數量有不同的限制。由於違反這些限制，DII 與該裝置的 SSH 會話在登入時被拒絕。這可能表明有重複的收藏家發現了相同的資產，應該避免這種情況 
|===


=== 表現

[cols="2*"]
|===
| 問題： | 試試一下： 


| 效能收集失敗，並顯示「發送 SNMP 請求時逾時」。 | 根據查詢變數和交換器配置，某些查詢可能會超過預設逾時。link:https://kb.netapp.com/Cloud/ncds/nds/dii/dii_kbs/Data_Infrastructure_Insights_Brocade_data_source_fails_performance_collection_with_a_timeout_due_to_default_SNMP_configuration["了解更多"] 。 


| 效能收集失敗，原因為...SNMP 表中發現重複行... | DII 偵測到錯誤的 SNMP 回應。您可能正在執行 FOS 8.2.3e。升級到 8.2.3e2 或更高版本。 


| 效能收集失敗，原因為...未知使用者名稱... | 您已為 DII 收集器設定了「SNMP 使用者名稱」值，但該值未插入 SNMPv3 使用者插槽之一。簡單地在Brocade FOS 上建立使用者並不一定將其作為 SNMPv3 使用者啟用 - 您必須將其放在 v3 使用者插槽之一中。 


| 效能收集失敗，原因為...不支援的安全等級... | 您已將 DII 收集器設定為使用 SNMPv3，但相關裝置上未啟用加密（又稱隱私）和/或授權設定。 


| 效能收集失敗，顯示...隱私密碼為空，僅允許用於隱私協定 NONE | 您已將 DII 收集器設定為使用 SNMPv3，並使用加密（又稱隱私協定）（AES 等），但您的「SNMP 隱私密碼」值為空，因此 DII 無法與此裝置協商加密的 SNMPv3 資料流 


| 效能收集失敗，錯誤為.....VF:nn，無存取權限... | 您已將 DII 收集器設定為在啟用了多個虛擬結構的裝置上使用 SNMPv3，但 SNMPv3 使用者沒有 VF NN 的權限。  DII 不支援對實體資產進行部分發現 - 您應該始終主動授予 DII 對所有 128 個可能的 VF 的存取權限，因為 DII 將始終嘗試檢索給定實體裝置上任何現存 VF 的效能數據 
|===
更多資訊可從link:concept_requesting_support.html["支援"]頁面或在link:reference_data_collector_support_matrix.html["數據收集器支援矩陣"]。
