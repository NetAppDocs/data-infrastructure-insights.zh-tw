---
sidebar: sidebar 
permalink: task_config_telegraf_docker.html 
keywords: telegraf, installation, install, docker 
summary: Docker 資料收集器配置 
---
= Docker 資料收集器
:hardbreaks:
:allow-uri-read: 


[role="lead"]
Data Infrastructure Insights使用此資料收集器從 Docker 收集指標。



== 安裝

. 從*可觀察性 > 收集器*中，按一下*+資料收集器*。選擇 Docker。
+
如果您尚未設定用於收集的代理，系統會提示您link:task_config_telegraf_agent.html["安裝代理"]您的租戶。

+
如果您已經配置了代理，請選擇適當的作業系統或平台，然後按一下「繼續」。

. 請依照 Docker 配置畫面中的說明配置資料收集器。說明根據您用於收集資料的作業系統或平台的類型而有所不同。


image:DockerDCConfigLinux.png["Docker 配置"]



== 設定

Docker 的 Telegraf 輸入插件透過指定的 UNIX 套接字或 TCP 端點收集指標。



=== 相容性

配置是針對 Docker 版本 1.12.6 開發的。



=== 設定



=== 透過 UNIX 套接字存取 Docker

如果 Telegraf 代理程式在裸機上執行，請透過執行以下命令將 telegraf Unix 使用者新增至 docker Unix 群組：

 sudo usermod -aG docker telegraf
如果 Telegraf 代理程式在 Kubernetes pod 中執行，則透過將套接字作為磁碟區對應到 pod 中，然後將該磁碟區掛載到 /var/run/docker.sock 來公開 Docker Unix 套接字。例如，將以下內容新增至 PodSpec：

[listing]
----
volumes:
...
- name: docker-sock
hostPath:
path: /var/run/docker.sock
type: File
----
然後，將以下內容新增至容器：

[listing]
----
volumeMounts:
...
- name: docker-sock
mountPath: /var/run/docker.sock
----
請注意，為 Kubernetes 平台提供的Data Infrastructure Insights安裝程式會自動處理此對應。



=== 透過 TCP 端點存取 Docker

預設情況下，Docker 使用連接埠 2375 進行未加密訪問，使用連接埠 2376 進行加密訪問。



== 物體和計數器

收集以下物件及其計數器：

[cols="<.<,<.<,<.<,<.<"]
|===
| 目的： | 標識符： | 屬性： | 數據點： 


| Docker 引擎 | 命名空間 Docker 引擎 | 節點名稱 節點 IP 節點 UUID 節點 OS Kubernetes 叢集 Docker 版本 單元 | 記憶體容器 已暫停的容器 正在運行的容器 已停止的容器 CPU Go 例程 映像 偵聽器事件 已使用的檔案描述符 可用資料 已使用的資料總量 可用元資料 元資料 已使用的總元資料 池 區塊大小 


| Docker容器 | 命名空間容器名稱 Docker 引擎 | Kubernetes 容器雜湊 Kubernetes 容器連接埠 Kubernetes 容器重開機計數 Kubernetes 容器終止訊息路徑 Kubernetes 容器終止訊息策略 Kubernetes Pod 終止寬限期 容器映像 容器狀態 容器版本 節點名稱 Kubernetes 容器終止站 Kubernet 容器名稱 Knetuber 容器名稱 Knetnetfnet net1沙盒 ID 節點 IP 節點 UUID Docker 版本 Kubernetes IO 配置可見 Kubernetes IO 配置來源 OpenShift IO SCC Kubernetes 描述 Kubernetes 顯示名稱 OpenShift 標籤 Kompose 服務 Pod 模板雜湊 控制器修訂StatefulSet Pod 名稱 租用戶 Web 控制台 架構 權威來源 URL 建置日期 RH 建置主機 RH 元件分佈範圍 安裝發佈運作摘要 解除安裝 VCS 引用 VCS 類型 供應商版本 健康狀況 容器 ID | 記憶體活動匿名記憶體活動檔案記憶體快取記憶體層級限制記憶體非活動匿名記憶體非活動檔案記憶體限制記憶體對應檔案記憶體最大使用量記憶體頁面錯誤記憶體頁面嚴重錯誤記憶體分頁傳入記憶體分頁傳出記憶體駐留集大小記憶體駐留集大小巨大記憶體總活動匿名記憶體總活動檔案記憶體總快取記憶體總非活動匿名記憶體總非活動檔案記憶體總映射檔案記憶體總頁錯誤記憶體總頁面嚴重錯誤記憶體總分頁傳入記憶體總分頁傳出記憶體總駐留集大小記憶體總駐留集大小巨大記憶體總不可清除記憶體不可清除記憶體使用量記憶體使用率退出程式碼OOM 終止 PID 啟動於失敗連勝 


| Docker 容器區塊 IO | 命名空間容器名稱裝置Docker引擎 | Kubernetes 容器雜湊 Kubernetes 容器連接埠 Kubernetes 容器重開機計數 Kubernetes 容器終止訊息路徑 Kubernetes 容器終止訊息策略 Kubernetes Pod 終止寬限期 容器映像 容器狀態 容器版本 節點名稱 Kubernetes 容器終止站 Kubernet 容器名稱 Knetuber 容器名稱 Knetnetfnet net1沙盒 ID 節點 IP 節點 UUID Docker 版本 Kubernetes 配置可見 Kubernetes 配置來源 OpenShift SCC Kubernetes 說明 Kubernetes 顯示名稱 OpenShift 標籤 架構 架構版本 Pod 範本雜湊 控制器修訂雜湊 Pod 範本產生 Kompose 服務服務架構權威來源 URL RH 建置主機 RH 元件分佈範圍 安裝 維護者 發佈 運行摘要 解除安裝 VCS 引用 VCS 類型 版本 架構 URL 架構 VCS URL 架構版本 容器 ID | IO 服務位元組數 遞歸異步 IO 服務位元組數 遞歸讀取 IO 服務位元組數 遞歸同步 IO 服務位元組數 遞歸總計 IO 服務位元組數 遞歸寫入 IO 服務 遞歸異步 IO 服務 遞歸 IO 服務位元組數 遞歸寫入 IO 服務 遞歸 


| Docker容器網路 | 命名空間容器名稱網路Docker引擎 | 容器映像 容器狀態 容器版本 節點名稱 節點IP 節點UUID 節點OS K8s叢集 Docker版本 容器ID | RX 丟棄 RX 位元組數 RX 錯誤數 RX 封包數 TX 丟棄 TX 位元組數 TX 錯誤數 TX 封包數 


| Docker 容器 CPU | 命名空間容器名稱CPU Docker引擎 | Kubernetes 容器雜湊 Kubernetes 容器連接埠 Kubernetes 容器重新啟動計數 Kubernetes 容器終止訊息路徑 Kubernetes 容器終止訊息策略 Kubernetes Pod 終止寬限期 Kubernetes 設定可見 Kubernetes 設定來源 OpenShift SCC 容器映像 容器狀態 容器版本 節點配置可見 Kubernetes 設定來源 OpenShift SCC 容器映像 netuber 容器版本 節點代碼Kubernetes Pod 命名空間 Kubernetes Pod UID Kubernetes 沙盒 ID 節點 IP 節點 UUID 節點作業系統 Kubernetes 叢集 Docker 版本 Kubernetes 說明 Kubernetes 顯示名稱 OpenShift 標籤 架構版本 Pod 範本雜湊 控制器修訂版 Pod設定 客戶端架構 Kompose 服務授權服務授權控制台許可證供應商架構權威來源 URL RH 建置主機 RH 元件分佈範圍安裝維護者發佈運行摘要卸載 VCS 引用 VCS 類型版本架構 URL 架構 VCS URL 架構版本容器 ID | 限制週期限制限制週期限制限制時間核心模式使用率使用者模式使用率使用率百分比系統使用率總計 
|===


== 故障排除

[cols="2*"]
|===
| 問題： | 試試一下： 


| 在按照配置頁面上的說明操作後，我沒有在Data Infrastructure Insights中看到我的 Docker 指標。 | 檢查 Telegraf 代理程式日誌，看它是否報告以下錯誤：E！插件 [inputs.docker] 中的錯誤：嘗試連接到 Docker 守護程式套接字時權限被拒絕如果確實如此，請採取必要的步驟，以便按照上面指定的方式為 Telegraf 代理提供對 Docker Unix 套接字的訪問權限。 
|===
更多資訊可從link:concept_requesting_support.html["支援"]頁。
