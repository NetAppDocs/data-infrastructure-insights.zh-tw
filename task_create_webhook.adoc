---
sidebar: sidebar 
permalink: task_create_webhook.html 
keywords: webhook, notification, slack, integration 
summary: 建立監視器以對效能或庫存閾值發出警報 
---
= 使用 Webhook 進行通知
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Webhook 允許使用者使用自訂的 webhook 通道向各種應用程式發送警報通知。

許多商業應用都支援webhooks作為標準輸入接口，例如：Slack、PagerDuty、Teams、Discord都支援webhooks。透過支援通用、可自訂的 webhook 通道， Data Infrastructure Insights可以支援許多此類交付通道。可以在這些應用程式網站上找到有關 webhook 的資訊。例如，Slack 提供link:https://api.slack.com/messaging/webhooks["這個有用的指南"]。

您可以建立多個 webhook 通道，每個通道針對不同的目的；單獨的應用程式、不同的收件者等。

Webhook 通道實例由下列元素組成：

|===


| Name | 唯一名稱 


| 網址 | Webhook 目標 URL，包括 _http://_ 或 _https://_ 前綴以及 URL 參數 


| 方法 | GET、POST - 預設為 POST 


| 自訂標題 | 在此指定任何自訂標題行 


| 訊息正文 | 在此處填寫您的郵件正文 


| 預設警報參數 | 列出 webhook 的預設參數 


| 自訂參數和機密 | 自訂參數和秘密可讓您新​​增唯一參數和安全元素，例如密碼 
|===


== 建立 Webhook

若要建立Data Infrastructure Insightswebhook，請前往 *管理 > 通知* 並選擇 *Webhooks* 標籤。

下圖顯示了為 Slack 配置的範例 webhook：

image:Webhook_Example_Slack.png["Webhook 範例"]

在每個欄位中輸入適當的信息，完成後按一下「儲存」。

您也可以點擊「測試 Webhook」按鈕來測試連線。請注意，這將根據所選方法將「訊息正文」（不含替換）傳送到定義的 URL。

Data Infrastructure Insightswebhook 包含許多預設參數。此外，您還可以建立自己的自訂參數或秘密。

image:Webhook_Default_Parameters.png["Data Infrastructure Insights預設 Webhook 參數"]



=== 參數：它們是什麼以及如何使用它們？

警報參數是每個警報填充的動態值。例如，_%%TriggeredOn%%_ 參數將被替換為觸發警報的物件。

您可以將任何物件屬性（例如，儲存名稱）作為參數新增至 webhook。例如，您可以在 webhook 描述中設定磁碟區名稱和儲存名稱的參數，例如：「磁碟區的高延遲：_%%relatedObject.volume.name%%_，儲存：_%%relatedObject.storage.name%%_」。

請注意，在本節中，按一下「測試 Webhook」按鈕時不會執行替換；該按鈕發送顯示 _%%_ 替換的有效負載，但不會用資料取代它們。



=== 自訂參數和機密

在本節中，您可以新增任何您想要的自訂參數和/或秘密。出於安全原因，如果定義了機密，則只有 webhook 建立者可以修改此 webhook 通道。對其他人來說它是唯讀的。您可以在 URL/Headers 中使用秘密作為 _%%<secret_name>%%_。



=== Webhook 列表頁面

Webhooks 清單頁面顯示名稱、建立者、建立日期、狀態、安全性和上次報告欄位。



== 在監視器中選擇 Webhook 通知

若要選擇 webhook 通知link:task_create_monitor.html["監視器"]，轉到*警報>管理監視器*並選擇所需的監視器，或新增新的監視器。在「設定團隊通知」部分，選擇「Webhook」作為傳送方式。選擇警報等級（嚴重、警告、已解決），然後選擇所需的 webhook。

image:Webhook_Monitor_Notify.png["Webhook 監控通知"]



== Webhook 範例：

Webhook 適用於link:task_webhook_example_slack.html["鬆弛"]Webhook 適用於link:task_webhook_example_pagerduty.html["PagerDuty"]Webhook 適用於link:task_webhook_example_teams.html["團隊"]Webhook 適用於link:task_webhook_example_discord.html["不和諧"]
