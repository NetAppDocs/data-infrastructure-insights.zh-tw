---
sidebar: sidebar 
permalink: task_dc_hds_commandsuite.html 
keywords: data collector, Hitachi Vantara Command Suite, Hitachi 
summary: 配置 HDS Command Suite 裝置管理員資料收集器。 
---
= Hitachi Vantara Command Suite 資料收集器
:hardbreaks:
:allow-uri-read: 


[role="lead"]
Hitachi Vantara Command Suite 資料收集器支援 HiCommand Device Manager 伺服器。Data Infrastructure Insights使用標準 HiCommand API 與 HiCommand 設備管理器伺服器通訊。



== 術語

Data Infrastructure Insights從 Hitachi Vantara Command Suite 資料收集器取得以下庫存資訊。對於Data Infrastructure Insights取得的每種資產類型，都會顯示用於該資產的最常用術語。當查看或排除此資料收集器的故障時，請記住以下術語：

[cols="2*"]
|===
| 供應商/型號術語 | Data Infrastructure Insights術語 


| PDEV | 磁碟 


| 期刊池 | 磁碟組 


| 儲存陣列 | 儲存 


| 連接埠控制器 | 儲存節點 


| 陣列組、HDS 池 | 儲存池 


| 邏輯單元，LDEV | 體積 
|===
注意：這些只是常見的術語映射，可能並不代表此資料收集器的所有情況。



=== 儲存

以下術語適用於您可能在 HDS 儲存資產登入頁面上找到的物件或參考。其中許多術語也適用於其他資料收集器。

* 名稱 – 透過 GetStorageArray XML API 呼叫直接來自 HDS HiCommand Device Manager 的「名稱」屬性
* 模型 - 透過 GetStorageArray XML API 呼叫直接來自 HDS HiCommand Device Manager 的「arrayType」屬性
* 供應商 – HDS
* 系列 - 透過 GetStorageArray XML API 呼叫直接來自 HDS HiCommand Device Manager 的「arrayFamily」屬性
* IP – 這是陣列的管理 IP 位址，而不是陣列上所有 IP 位址的詳盡列表
* 原始容量 – 以 2 為底的值，表示此系統中所有磁碟的總容量總和，無論磁碟角色為何。




=== 儲存池

以下術語適用於您可能在 HDS 儲存池資產登入頁面上找到的物件或參考。其中許多術語也適用於其他資料收集器。

* 類型：此處的值將是以下之一：
+
** 保留 – 如果此池專用於資料磁碟區以外的目的，即日誌記錄、快照
** 精簡配置 – 如果這是一個 HDP 池
** 突襲小組 – 您可能不會看到這些，原因如下：
+
Data Infrastructure Insights採取強硬立場，不惜一切代價避免重複運算容量。在 HDS 上，通常需要從磁碟建立 Raid 群組，在這些 Raid 群組上建立池卷，並從這些池卷建置池（通常是 HDP，但可以是特殊用途的）。如果Data Infrastructure Insights報告底層 Raid 群組和池，則它們的原始容量總和將大大超過磁碟的總和。

+
相反， Data Infrastructure Insights的 HDS Command Suite 資料收集器會根據池磁碟區的容量任意縮小 Raid Groups 的大小。這可能導致Data Infrastructure Insights根本不報告 Raid 組。此外，任何產生的 Raid 群組都會被標記，使得它們在Data Infrastructure InsightsWebUI 中不可見，但它們會流入Data Infrastructure Insights資料倉儲 (DWH)。這些決定的目的是避免大多數用戶不關心的事情導致 UI 混亂——如果您的 HDS 陣列有 50MB 可用的 Raid 群組，您可能無法將該可用空間用於任何有意義的結果。



* 節點 - N/A，因為 HDS 池不綁定到任何一個特定節點
* 冗餘 - 池的 RAID 等級。對於由多種 RAID 類型組成的 HDP 池，可能有多個值
* 容量百分比 - 池中資料使用的百分比，包括已使用的 GB 和池的總邏輯 GB 大小
* 超額承諾容量 - 一個派生值，表示“由於邏輯磁碟區總和超出池邏輯容量的百分比，該池的邏輯容量超額認購了該百分比”
* 快照 - 顯示此池上為快照使用保留的容量




=== 儲存節點

以下術語適用於您可能在 HDS 儲存節點資產登入頁面上找到的物件或參考。其中許多術語也適用於其他資料收集器。

* 名稱 – 單晶片陣列上的前端控制器 (FED) 或通道適配器的名稱，或模組化陣列上的控制器的名稱。給定的 HDS 陣列將有 2 個或更多儲存節點
* 卷 – 捲表將顯示映射到此儲存節點擁有的任何連接埠的任何卷




== 庫存需求

為了收集庫存數據，您必須具備以下條件：

* HiCommand 設備管理員伺服器的 IP 位址
* HiCommand 裝置管理員軟體的唯讀使用者名稱和密碼以及對等權限
* 連接埠需求：2001（http）或 2443（https）
* 使用使用者名稱和密碼登入 HiCommand 裝置管理員軟體
* 驗證對 HiCommand 裝置管理員的存取權限 \http://<HiCommand_Device_Manager_IP>:2001/service/StorageManager




== 性能要求

為了收集性能數據，必須滿足以下要求：

* HDS USP、USP V 和 VSP 性能
+
** 效能監視器必須獲得許可。
** 必須開啟監控開關。
** 必須將匯出工具（Export.exe）複製到Data Infrastructure InsightsAU。
** 匯出工具版本必須與目標陣列的微碼版本相符。


* AMS效能：
+
** NetApp強烈建議在 AMS 陣列上建立一個專用服務帳戶，以供Data Infrastructure Insights用於檢索效能資料。 Storage Navigator 僅允許一個使用者帳戶同時登入陣列。讓Data Infrastructure Insights使用與管理腳本或 HiCommand 相同的使用者帳戶可能會導致Data Infrastructure Insights、管理腳本或 HiCommand 因一個並髮使用者帳戶登入限製而無法與陣列通信
** 效能監視器必須獲得許可。
** 需要在Data Infrastructure Insights AU 上安裝 Storage Navigator Modular 2 (SNM2) CLI 實用程式。






== 配置

[cols="2*"]
|===
| 場地 | 描述 


| HiCommand 伺服器 | HiCommand Device Manager 伺服器的 IP 位址或完全限定域名 


| 使用者名稱 | HiCommand 裝置管理員伺服器的使用者名稱。 


| 密碼 | HiCommand 設備管理員伺服器所使用的密碼。 


| 設備 - VSP G1000 (R800)、VSP (R700)、HUS VM (HM700) 和 USP 存儲 | VSP G1000 (R800)、VSP (R700)、HUS VM (HM700) 和 USP 儲存的設備清單。每個儲存都需要：* 陣列的 IP：儲存的 IP 位址* 使用者名稱：儲存的使用者名稱* 密碼：儲存的密碼* 包含匯出實用程式 JAR 檔案的資料夾 


| SNM2Devices - WMS/SMS/AMS 存儲 | WMS/SMS/AMS 儲存的設備清單。每個儲存都需要：* 陣列的 IP：儲存的 IP 位址* 儲存導航器 CLI 路徑：SNM2 CLI 路徑* 帳戶驗證有效：選擇以選擇有效的帳戶驗證* 使用者名稱：儲存的使用者名稱* 密碼：儲存的密碼 


| 選擇效能調優管理器 | 覆蓋其他效能選項 


| 調優管理器主機 | 調優管理員的 IP 位址或完全限定域名 


| 覆蓋調整管理器端口 | 如果為空，則使用「選擇效能調整管理器」欄位中的預設端口，否則輸入要使用的端口 


| 調優經理用戶名 | 調優管理器的使用者名 


| 調優管理員密碼 | 調優管理員密碼 
|===
注意：在 HDS USP、USP V 和 VSP 中，任何磁碟都可以屬於多個陣列組。



== 進階配置

|===


| 場地 | 描述 


| 連接類型 | HTTPS 或 HTTP，也顯示預設端口 


| HiCommand 伺服器連接埠 | 用於 HiCommand 裝置管理員的連接埠 


| 庫存輪詢間隔（分鐘） | 庫存調查之間的間隔。預設值為 40。 


| 選擇“排除”或“包含”來指定列表 | 指定收集資料時是否包含或排除以下數組清單。 


| 過濾設備列表 | 要包含或排除的設備序號的逗號分隔列表 


| 效能輪詢間隔（秒） | 效能輪詢之間的間隔。預設值為 300。 


| 匯出超時（秒） | 導出實用程式逾時。預設值為 300。 
|===


== 故障排除

如果您在使用此資料收集器時遇到問題，請嘗試以下操作：



=== 存貨

[cols="2*"]
|===
| 問題： | 試試一下： 


| 錯誤：使用者沒有足夠的權限 | 使用具有更多權限的其他使用者帳戶或增加資料收集器中配置的使用者帳戶的權限 


| 錯誤：儲存列表為空。設備未配置或使用者沒有足夠的權限 | * 使用 DeviceManager 檢查設備是否已設定。  * 使用其他具有更多權限的使用者帳戶，或增加使用者帳戶的權限 


| 錯誤：HDS 儲存陣列幾天未刷新 | 調查為什麼此陣列未在 HDS HiCommand 中刷新。 
|===


=== 表現

[cols="2*"]
|===
| 問題： | 試試一下： 


| 錯誤：* 執行匯出實用程式時發生錯誤 * 執行外部命令時發生錯誤 | * 確認匯出公用程式已安裝在Data Infrastructure Insights擷取單元上 * 確認匯出公用程式在資料收集器設定中的位置正確 * 確認 USP/R600 陣列的 IP 在資料收集器的設定中正確 * 確認使用者名稱與密碼在Data Infrastructure Insights器的設定中正確 * 確認匯出公用程式嘗試透過執行批次檔 runWin.bat 與設定的儲存陣列建立連接 


| 錯誤：目標 IP 的匯出工具登入失敗 | * 確認使用者名稱/密碼正確 * 建立一個主要為此 HDS 資料收集器的使用者 ID * 確認沒有配置其他資料收集器來取得此陣列 


| 錯誤：匯出工具記錄「無法取得監控的時間範圍」。 | * 確認陣列上已啟用效能監控。  * 嘗試呼叫Data Infrastructure Insights以外的匯出工具來確認問題出在Data Infrastructure Insights之外。 


| 錯誤：* 設定錯誤：匯出實用程式不支援儲存陣列 * 設定錯誤：儲存導航器模組化 CLI 不支援儲存陣列 | * 僅配置支援的儲存陣列。  * 使用「過濾設備清單」排除不支援的儲存陣列。 


| 錯誤：* 執行外部命令時發生錯誤 * 配置錯誤：Inventory 未報告儲存陣列 * 配置錯誤：匯出資料夾不包含 jar 檔案 | * 檢查匯出實用程式位置。  * 檢查所討論的儲存陣列是否在 HiCommand 伺服器中配置 * 將效能輪詢間隔設定為 60 秒的倍數。 


| 錯誤：* 儲存導航器 CLI 錯誤 * 執行 auperform 指令時發生錯誤 * 執行外部指令時發生錯誤 | * 確認儲存導航器模組化 CLI 已安裝在Data Infrastructure Insights擷取單元上 * 確認儲存導航器模組化 CLI 在資料收集器設定中的位置正確 * 確認資料收集器的設定中 WMS/SMS/SMS 陣列的 IP 正確 * 確認儲存導航器模組化 CLI 版本與資料收集器的設定中 WMS/SMS/SMS 陣列的Data Infrastructure Insights* 確認儲存導航器模組化 CLI 版本與資料收集嘗試透過執行以下命令“auunitref.exe”與配置的儲存陣列建立連接 


| 錯誤：設定錯誤：庫存未報告儲存陣列 | 檢查相關儲存陣列是否在 HiCommand 伺服器中配置 


| 錯誤：* 沒有陣列在 Storage Navigator Modular 2 CLI 中註冊 * 陣列未在 Storage Navigator Modular 2 CLI 中註冊 * 配置錯誤：儲存陣列未在 StorageNavigator Modular CLI 中註冊 | * 開啟命令提示字元並將目錄變更為配置的路徑 * 執行命令「set=STONAVM_HOME=」。  * 運行命令“auunitref” * 確認命令輸出包含帶有 IP 的陣列詳細信息 * 如果輸出不包含陣列詳細信息，則使用 Storage Navigator CLI 註冊陣列： - 打開命令提示符並將目錄更改為配置的路徑 - 運行命令“set=STONAVM_HOME=”。 - 執行指令「auunitaddauto -ip <ip>」。將 <ip> 替換為正確的 IP。 
|===
更多資訊可從link:concept_requesting_support.html["支援"]頁面或在link:reference_data_collector_support_matrix.html["數據收集器支援矩陣"]。
