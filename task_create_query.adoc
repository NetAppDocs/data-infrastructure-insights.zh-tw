---
sidebar: sidebar 
permalink: task_create_query.html 
summary: 查詢可讓您快速輕鬆地識別感興趣的資產和指標。 
keywords: query, queries 
---
= 建立查詢
:hardbreaks:
:allow-uri-read: 


[role="lead"]
透過查詢，您可以在細微層級搜尋租用戶上的資產，從而可以篩選所需的資料並根據您的喜好對結果進行排序。

例如，您可以為_volumes_建立查詢，新增一個篩選器來尋找與所選磁碟區關聯的特定_storages_，新增另一個篩選器來尋找所選儲存體上的特定_annotation_（例如「Tier 1」），最後新增另一個篩選器來尋找所有_IOPS - 讀取（IO/s）_大於 25 的儲存。當顯示結果時，您可以按升序或降序對與查詢相關的資訊列進行排序。

注意：當新增了獲取資產的新資料收集器，或進行了任何註釋或應用程式分配時，只有在對查詢進行索引後，您才能查詢這些新資產、註釋或應用程式。索引會依照定期排程的時間間隔或在某些事件（例如執行註解規則）期間發生。

.建立查詢非常簡單：
. 導航至*查詢>*+新查詢*。
. 從「選擇...」清單中，選擇要查詢的物件類型。您可以捲動瀏覽列表，也可以開始輸入以更快找到要搜尋的內容。


.滾動列表：
image:QueryDrop-DownList.png["查詢下拉選單"]

.輸入搜尋：
image:QueryPageFilter.png["鍵入以查找"]

您可以透過點擊「Filter By」欄位中的「*+*」按鈕來新增篩選器，以進一步縮小查詢範圍。依物件或屬性對行進行分組。使用整合資料（Kubernetes、 ONTAP Advanced Metrics 等）時，如果需要，您可以按多個屬性分組。

image:QueryFilterExample.png["查詢篩選和分組"]

查詢結果清單顯示許多預設列，具體取決於搜尋的物件類型。若要新增、刪除或變更列，請點選表格右側的齒輪圖示。可用的欄位根據資產/指標類型而有所不同。

image:QuerySelectColumns.png["選擇列"]



== 觀看實際操作

link:https://media.netapp.com/video-detail/d0530e0b-a222-52e7-92b1-dbeeee41b712/explore-and-analyze-with-queries-in-data-infrastructure-insights["使用Data Infrastructure Insights中的查詢進行探索和分析（影片）"]



== 選擇聚合、單位、條件格式



=== 聚合和單位

對於「值」列，您可以透過選擇顯示值的聚合方式以及選擇顯示這些值的單位來進一步最佳化查詢結果。透過選擇列頂角的「三個點」選單可以找到這些選項。

image:Query_Page_Aggregation_etc.png["查詢頁面結果顯示聚合、條件格式、單位顯示和列重命名"]



==== 單位

您可以選擇顯示值的單位。例如，如果選取的欄位顯示原始容量，且值以 GiB 顯示，但您希望將其顯示為 TiB，只需從單位顯示下拉式選單中選擇 TiB。



==== 聚合

同樣，如果顯示的值是從基礎資料聚合而來的“平均值”，但您希望顯示所有值的總和，請從“分組依據”下拉選單中選擇“總和”（如果您希望任何分組值顯示總和）或從“時間聚合依據”下拉選單中選擇“總和”（如果您希望行值顯示基礎資料的總和）。

您可以選擇透過「平均值」、「最大值」、「最小值」或「總和」來聚合分組資料點。

您可以按「平均值」、「最後取得的資料點」、「最大值」、「最小值」或「總和」來聚合單一行的資料。



==== 條件格式

條件格式可讓您在查詢結果清單中反白顯示警告等級和臨界等級閾值，從而立即顯示異常值和異常資料點。

image:Query_Page_Conditional_Formatting.png["查詢頁面上的條件格式"]

為每一列單獨設定條件格式。例如，您可以為容量列選擇一組閾值，為吞吐量列選擇另一組閾值。



==== 重新命名列

重新命名列會改變查詢結果清單中顯示的名稱。如果將查詢清單匯出為 .CSV，新的列名也會顯示在結果檔案中。



=== 節省

配置查詢以顯示您想要的結果後，您可以按一下「儲存」按鈕儲存查詢以供將來使用。給它一個有意義且獨特的名字。



== 有關過濾的更多信息



=== 通配符和表達式

當您在查詢或儀表板小工具中篩選文字或清單值時，當您開始輸入時，系統會向您顯示基於目前文字建立*通配符篩選器*的選項。選擇此選項將傳回與通配符表達式相符的所有結果。您也可以使用 NOT 或 OR 建立*表達式*，或者您可以選擇「無」選項來過濾欄位中的空值。

image:Type-Ahead-Example-ingest.png["通配符過濾器"]

基於通配符或表達式的篩選器（例如 NOT、OR、「無」等）在篩選器欄位中以深藍色顯示。您直接從清單中選擇的項目顯示為淺藍色。

image:Type-Ahead-Example-Wildcard-DirectSelect.png["通配符過濾結果"]

請注意，通配符和表達式過濾適用於文字或列表，但不適用於數字、日期或布林值。



=== 精煉過濾器

您可以使用以下內容來優化過濾器：

|===


| 篩選 | 它的作用 | 例子 | 結果 


| *（星號） | 讓您搜尋一切 | 沃爾*雷爾 | 返回以“vol”開頭並以“rhel”結尾的所有資源 


| ？  （問號） | 使您能夠搜尋特定數量的字符 | BOS-PRD??-S12 | 返回 BOS-PRD**__12__**-S12、BOS-PRD**__23__**-S12 等等 


| 或者 | 使您能夠指定多個實體 | FAS2240 或 CX600 或 FAS3270 | 傳回 FAS2440、CX600 或 FAS3270 中的任一個 


| 不是 | 允許您從搜尋結果中排除文本 | 非 EMC* | 傳回所有不以「EMC」開頭的內容 


| _沒有任何_ | 在所有欄位中搜尋 NULL 值 | _沒有任何_ | 傳回目標欄位為空的結果 


| 不是 * | 在純文字欄位中搜尋 NULL 值 | 不是 * | 傳回目標欄位為空的結果 
|===
如果將過濾字串括在雙引號中，Insight 會將第一個引號和最後一個引號之間的所有內容視為完全匹配。引號內的任何特殊字元或運算符將被視為文字。例如，過濾「*」將傳回文字星號的結果；在這種情況下，星號不會被視為通配符。當運算子 OR 和 NOT 括在雙引號中時，它們也將被視為文字字串。



=== 過濾布林值

當過濾布林值時，您可能會看到以下過濾選項：

* *任何*：這將傳回所有結果，包括設定為「是」、「否」或根本沒有設定的結果。
* *是*：僅傳回「是」的結果。請注意，DII 在大多數表格中均顯示“是”作為複選標記。值可以設定為“True”、“On”等；DII 將所有這些都視為“是”。
* *否*：僅傳回「否」結果。請注意，DII 在大多數表格中將“否”顯示為“X”。值可以設定為“False”、“Off”等；DII 將所有這些都視為“No”。
* *無*：僅傳回根本沒有設定值的結果。也稱為“空”值。




== 現在我有了查詢結果，我該做什麼？

查詢提供了一個簡單的地方來添加註釋或將應用程式分配給資產。請注意，您只能將應用程式或註釋分配給您的庫存資產（磁碟、儲存等）。整合指標不能承擔註解或應用程式分配。

若要為查詢得到的資產指派註解或應用程序，只需使用結果表左側的複選框列選擇資產，然後按一下右側的*批次操作*按鈕。選擇要套用於選取資產的所需操作。

image:QueryVolumeBulkActions.png["查詢批次操作範例"]



== 註釋規則需要查詢

如果您正在配置link:task_create_annotation_rules.html["註釋規則"]，每個規則都必須有一個可以使用的底層查詢。但正如您上面所看到的，查詢可以根據需要進行廣泛或狹窄的查詢。
